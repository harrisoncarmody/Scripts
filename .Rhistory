dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=SST..NOAA.data.)%>%
#   select predictor variables
select(c(Julian.day,Decimal.Median.time,Decimal.fishing.hours,Boat.ramp,SST,Total.fish.hooked,Fishing.method,No..fish.lost.to.sharks,Max.hook..depth,Kernel.density,Month.Year,Lat,fivekm))%>%
#   Choose response variable
rename(response=No..fish.lost.to.sharks)%>%
na.omit() #gets rid of NA's
# librarys----
detach("package:plyr", unload=TRUE) #will error - no worries
library(tidyr)
library(dplyr)
options(dplyr.width = Inf) #enables head() to display all coloums
library(mgcv)
library(MuMIn)
library(car)
library(doBy)
library(gplots)
library(RColorBrewer)
library(doParallel)
library(gamm4)
rm(list=ls()) #clear memory/workspace
study<-"Spanish Mackerel Model" # sets name of this workspace
# Add you work dir here-
work.dir=("G:/My Drive/Masters/Project/Spanish Mackerel Depredation/Results/R/Analysis_Carmody_depredation") #google drive
# Then set the folders within the owncloud for the output files to go into
tidy.data=paste(work.dir,"Data",sep="/") # Data folder
plots=paste(work.dir,"Plots",sep="/") # plots folder
script.dir=paste(work.dir,"Scripts",sep="/") # scripts folder
model.out=paste(work.dir,"Model Outputs",sep="/") # model outputs folder
# Load full subset gam function----
source("G:/My Drive/Masters/Project/Spanish Mackerel Depredation/Results/R/Analysis_Carmody_depredation/Scripts/function_full_subsets_gam_v1.11.R") # source file
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sST)%>%
#   select predictor variables
select(c(Julian.day,Decimal.Median.time,Decimal.fishing.hours,Boat.ramp,SST,Total.fish.hooked,Fishing.method,No..fish.lost.to.sharks,Max.hook..depth,Kernel.density,Month.Year,Lat,fivekm))%>%
#   Choose response variable
rename(response=No..fish.lost.to.sharks)%>%
na.omit() #gets rid of NA's
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC.csv SST Edit",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sST)%>%
#   select predictor variables
select(c(Julian.day,Decimal.Median.time,Decimal.fishing.hours,Boat.ramp,SST,Total.fish.hooked,Fishing.method,No..fish.lost.to.sharks,Max.hook..depth,Kernel.density,Month.Year,Lat,fivekm))%>%
#   Choose response variable
rename(response=No..fish.lost.to.sharks)%>%
na.omit() #gets rid of NA's
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HCSST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sST)%>%
#   select predictor variables
select(c(Julian.day,Decimal.Median.time,Decimal.fishing.hours,Boat.ramp,SST,Total.fish.hooked,Fishing.method,No..fish.lost.to.sharks,Max.hook..depth,Kernel.density,Month.Year,Lat,fivekm))%>%
#   Choose response variable
rename(response=No..fish.lost.to.sharks)%>%
na.omit() #gets rid of NA's
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sST)%>%
#   select predictor variables
select(c(Julian.day,Decimal.Median.time,Decimal.fishing.hours,Boat.ramp,SST,Total.fish.hooked,Fishing.method,No..fish.lost.to.sharks,Max.hook..depth,Kernel.density,Month.Year,Lat,fivekm))%>%
#   Choose response variable
rename(response=No..fish.lost.to.sharks)%>%
na.omit() #gets rid of NA's
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
rename(NumberMackerelTaken.(full)=No.fish.lost)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,SST,Fraction.moon.illuminated,NumberCaught,Method,No.fish.lost,Fishing.pressure.all.years,Month,Year,Block))%>%
#   Choose response variable
rename(response=No.fish.lost)%>%
na.omit() #gets rid of NA's
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
rename(NumberMackerelTaken.(full)=No.fish.lost)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,SST,Fraction.moon.illuminated,NumberCaught,Method,No.fish.lost,Fishing.pressure.all.years,Month,Year,Block))%>%
#   Choose response variable
rename(response=No.fish.lost)%>%
na.omit() #gets rid of NA's
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
rename(NumberMackerelTaken.(full)=No.fish.lost)%>%
#   select predictor variables
select(c(Decimal.median.time,Hours,SST,Fraction.moon.illuminated,NumberCaught,Method,No.fish.lost,Fishing.pressure.all.years,Month,Year,Block))%>%
#   Choose response variable
rename(response=No.fish.lost)%>%
na.omit() #gets rid of NA's
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)
View(dat)
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
rename(NumberMackerelTaken..full.=No.fish.lost)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,SST,Fraction.moon.illuminated,NumberCaught,Method,No.fish.lost,Fishing.pressure.all.years,Month,Year,Block))%>%
#   Choose response variable
rename(response=No.fish.lost)%>%
na.omit() #gets rid of NA's
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
rename(NumberMackerelTaken..full.=No.fish.lost)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,SST,Fraction.moon.illuminated,NumberCaught,Method,No.fish.lost,Fishing.pressure.all.years,Month,Year,Block))%>%
#   Choose response variable
rename(response=No.fish.lost)%>%
na.omit() #gets rid of NA's
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,SST,Fraction.moon.illuminated,NumberCaught,Method,Number.Mackerel.Taken..full.,Fishing.pressure.all.years,Month,Year,Block))%>%
#   Choose response variable
rename(response=No.fish.lost)%>%
na.omit() #gets rid of NA's
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,SST,Fraction.moon.illuminated,NumberCaught,Method,Number.Mackerel.Taken..full,Fishing.pressure.all.years,Month,Year,Block))%>%
#   Choose response variable
rename(response=No.fish.lost)%>%
na.omit() #gets rid of NA's
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
rename(NumberMackerelTaken..full.=No.fish.lost)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,SST,Fraction.moon.illuminated,NumberCaught,Method,No.fish.lost,Fishing.pressure.all.years,Month,Year,Block))%>%
#   Choose response variable
rename(response=No.fish.lost)%>%
na.omit() #gets rid of NA's
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,SST,Fraction.moon.illuminated,NumberCaught,Method,NumberMackerelTaken..full.,Fishing.pressure.all.years,Month,Year,Block))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
head(dat,3)# view first 3 rows of each column
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
head(dat,3)# view first 3 rows of each column
names(dat) # view the names of the columns
str(dat) #check format
dat <- subset(dat, Zone%in%c("1"))
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat <- subset(dat, Zone%in%c("1"))
# Check levels of factors----
table(dat$Date) # Two boat ramps
# Check levels of factors----
table(dat$Zone) # Two boat ramps
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,Skipper,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
View(dat)
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,Skipper,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
("subset")
help("subset")
help(subset)
dat <- subset(dat, Skipper%out%c("AB"))
dat <- subset(dat, Skipper%in%c("A,Aa,Ac,Af,Ag,Ah,Ai,Aj,Ao,Ar,B,D,E,F,I,J,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z"))
View(dat)
dat <- subset(dat, Zone%in%c("1"))
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,Skipper,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat <- subset(dat, Zone%in%c("1"))
View(dat)
dat <- subset(dat, Skipper%in%c("A,B,D,E,F,H,I,J,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Aa,Ac,Af,Ag,Ah,Ai,Aj,Ao,Ar"))
dat <- subset(dat, Skipper%in%c("A"))
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,Skipper,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat <- subset(dat, Zone%in%c("1"))
dat <- subset(dat, Skipper%in%c("A"))
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,Skipper,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat <- subset(dat, Zone%in%c("1"))
dat <- subset(dat, Skipper%in%c("E"))
View(dat)
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,Skipper,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat <- subset(dat,!Skipper("Ab"))
dat <- subset(dat,!"Skipper"("Ab"))
dat <- subset(dat, Skipper==A)
dat <- subset(dat, Skipper=="A")
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,Skipper,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat <- subset(dat, Skipper=="A,Ab")
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,Skipper,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat <- subset(dat, Skipper=="A","Ab")
dat <- subset(dat, Skipper%in%c("A","Ab"))
View(dat)
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,Skipper,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat <- subset(dat, Skipper%in%c("A","E"))
View(dat)
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,Skipper,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat <- subset(dat, Skipper%in%c("A","B","D","E","F","H","I","J","M","N","o","P","Q","R","S","T","U","V","W","X","Y","Z"))
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,Skipper,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat <- subset(dat, Skipper!%in%c("A","B","D","E","F","H","I","J","M","N","o","P","Q","R","S","T","U","V","W","X","Y","Z"))
dat <- subset(dat, !Skipper%in%c("A","B","D","E","F","H","I","J","M","N","o","P","Q","R","S","T","U","V","W","X","Y","Z"))
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,Skipper,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat <- subset(dat, !Skipper%in%c("Ab","Ad","Ae","Ak","Al","Ap","Aq","C","G","K"))
View(dat)
dat <- subset(dat, Zone%in%c("1"))
table(dat$Skipper) # 20 Julian day values for the sampling days
# Set predictor variables for GAM---
# First continuous predictors
pred.vars=c("Block",
"SST",
"Hours",
"Decimal.Median.time",
"Fraction.moon.illuminated",
"Fishing.pressure.all.years",
"Method")
pred.vars.fact=c("Month","Year")
# Check for correalation of predictor variables---
round(cor(dat[,pred.vars]),2)
# Check for correalation of predictor variables---
round(cor(dat[,pred.vars]))
# Check for correalation of predictor variables---
round(cor(dat[,pred.vars]),3)
# Check for correalation of predictor variables---
round(cor(dat[,pred.vars]),1)
# Check for correalation of predictor variables---
round(cor(dat[,pred.vars]),)
# Check for correalation of predictor variables---
round(cor(dat[,pred.vars]),4)
# Check for correalation of predictor variables---
round(cor(dat[,pred.vars]),5)
# Check for correalation of predictor variables---
round(cor(dat[1,pred.vars]),2)
# Check for correalation of predictor variables---
round(cor(dat[,pred.vars])1,2)
# Check for correalation of predictor variables---
round(cor(dat[2,pred.vars]),2)
help([])
pred.vars
# Check for correalation of predictor variables---
round(cor(dat[pred.vars,]),2)
# Check for correalation of predictor variables---
round(cor(dat[,pred.vars]),2)
# Check for correalation of predictor variables---
round(cor(dat[,pred.vars])3,2)
# Check for correalation of predictor variables---
round(cor(dat[,pred.vars]),10)
# Check for correalation of predictor variables---
round(cor(dat[,pred.vars]),15)
# Check for correalation of predictor variables---
round(cor(dat[,pred.vars]),45)
help(cor)
# Check for correalation of predictor variables---
round(cor(dat[2,pred.vars]))
# Check for correalation of predictor variables---
round(cor(dat[2,pred.vars]),2)
pred.vars
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,Skipper,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat <- subset(dat, !Skipper%in%c("Ab","Ad","Ae","Ak","Al","Ap","Aq","C","G","K"))
dat <- subset(dat, Zone%in%c("1"))
# Set predictor variables for GAM---
# First continuous predictors
pred.vars=c("Block",
"SST",
"Hours",
"Decimal.Median.time",
"Fraction.moon.illuminated",
"Fishing.pressure.all.years",
"Method")
pred.vars
pred.vars.fact=c("Month","Year")
# Check for correalation of predictor variables---
round(cor(dat[,pred.vars]),2)
# The code below sets the format for creating plots for each predictor variable
# It saves them as pdf files with the title and date
pdf(file=paste(file=paste(Sys.Date(),study,"predictor_plots.pdf",sep = "_")),onefile=T)
for(p in 1:length(pred.vars)){
par(mfrow=c(2,1)) # sets it so that there is 2 plots next to each other
plot.dat=dat
hist(plot.dat[,pred.vars[p]],main=pred.vars[p]) # For creating histograms of predictors
plot(plot.dat[,pred.vars[p]]) # For creating scatter plots of predictors
}
par(mfrow=c(2,1))
hist((dat$response))
plot((dat$response))
rm(list=ls()) #clear memory/workspace
study<-"Spanish Mackerel Model" # sets name of this workspace
# Add you work dir here-
work.dir=("G:/My Drive/Masters/Project/Spanish Mackerel Depredation/Results/R/Analysis_Carmody_depredation") #google drive
# Then set the folders within the owncloud for the output files to go into
tidy.data=paste(work.dir,"Data",sep="/") # Data folder
plots=paste(work.dir,"Plots",sep="/") # plots folder
script.dir=paste(work.dir,"Scripts",sep="/") # scripts folder
model.out=paste(work.dir,"Model Outputs",sep="/") # model outputs folder
# Load full subset gam function----
source("G:/My Drive/Masters/Project/Spanish Mackerel Depredation/Results/R/Analysis_Carmody_depredation/Scripts/function_full_subsets_gam_v1.11.R") # source file
dat<-read.csv("C:/Users/Harrison Carmody/Documents/Uni Documents/Masters/Project/Spanish Mackerel Depredation/Results/Raw/CombinedlDailyQueries by SessionID to 2017HC SST Edit.csv",stringsAsFactors =T)%>%
#   renaming predictors to make names shorter
rename(SST=sst)%>%
#   select predictor variables
select(c(Date,Decimal.median.time,Hours,Month,Year,Block,Zone,Skipper,SST,Fraction.moon.illuminated,Fishing.pressure.all.years,NumberCaught,Method,NumberMackerelTaken..full.))%>%
#   Choose response variable
rename(response=NumberMackerelTaken..full.)%>%
na.omit() #gets rid of NA's
dat <- subset(dat, !Skipper%in%c("Ab","Ad","Ae","Ak","Al","Ap","Aq","C","G","K"))
dat <- subset(dat, Zone%in%c("1"))
# Set predictor variables for GAM---
# First continuous predictors
pred.vars=c("Block",
"SST",
"Hours",
"Decimal.Median.time",
"Fraction.moon.illuminated",
"Fishing.pressure.all.years",
"Method")
pred.vars.fact=c("Month","Year")
hist((dat$response))
hist((dat$response))
